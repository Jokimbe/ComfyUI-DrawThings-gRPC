{"id":"524b405d-3c13-4315-a88c-bd01596c560e","revision":0,"last_node_id":14,"last_link_id":11,"nodes":[{"id":6,"type":"SaveImage","pos":[3160,1150],"size":[450,440],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":4},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.38","Node name for S&R":"SaveImage"},"widgets_values":["ComfyUI"]},{"id":7,"type":"DrawThingsPrompt","pos":[1890,1400],"size":[400,200],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"insert_textual_inversion","name":"insert_textual_inversion","type":"DT_MODEL","widget":{"name":"insert_textual_inversion"},"link":null},{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":null}],"outputs":[{"color_off":"#EF5350","color_on":"#EF5350","localized_name":"PROMPT","name":"PROMPT","type":"STRING","links":[6]}],"properties":{"cnr_id":"drawthings-grpc","ver":"97b273b461f7d06b8823d0e4b16cb1bcdb77054e","Node name for S&R":"DrawThingsPrompt"},"widgets_values":["...","low quality, blurry, watermark"],"color":"#322","bgcolor":"#533","_lastSelectedModel":{}},{"id":10,"type":"DrawThingsSampler","pos":[2800,1150],"size":[312.08984375,750],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"image","name":"image","shape":7,"type":"IMAGE","link":7},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":8},{"color_off":"#FFA931","color_on":"#FFA931","localized_name":"positive","name":"positive","shape":7,"type":"STRING","link":5},{"color_off":"#FFA931","color_on":"#FFA931","localized_name":"negative","name":"negative","shape":7,"type":"STRING","link":6},{"localized_name":"lora","name":"lora","shape":7,"type":"DT_LORA","link":null},{"localized_name":"control_net","name":"control_net","shape":7,"type":"DT_CNET","link":null},{"localized_name":"upscaler","name":"upscaler","shape":7,"type":"DT_UPSCALER","link":null},{"localized_name":"refiner","name":"refiner","shape":7,"type":"DT_REFINER","link":null},{"localized_name":"settings","name":"settings","type":"COMBO","widget":{"name":"settings"},"link":null},{"localized_name":"server","name":"server","type":"STRING","widget":{"name":"server"},"link":null},{"localized_name":"port","name":"port","type":"STRING","widget":{"name":"port"},"link":null},{"localized_name":"use_tls","name":"use_tls","type":"BOOLEAN","widget":{"name":"use_tls"},"link":null},{"localized_name":"model","name":"model","type":"DT_MODEL","widget":{"name":"model"},"link":null},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"seed_mode","name":"seed_mode","type":"COMBO","widget":{"name":"seed_mode"},"link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"num_frames","name":"num_frames","type":"INT","widget":{"name":"num_frames"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"speed_up","name":"speed_up","type":"BOOLEAN","widget":{"name":"speed_up"},"link":null},{"localized_name":"guidance_embed","name":"guidance_embed","type":"FLOAT","widget":{"name":"guidance_embed"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"res_dpt_shift","name":"res_dpt_shift","type":"BOOLEAN","widget":{"name":"res_dpt_shift"},"link":null},{"localized_name":"shift","name":"shift","type":"FLOAT","widget":{"name":"shift"},"link":null},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null},{"localized_name":"fps","name":"fps","type":"INT","widget":{"name":"fps"},"link":null},{"localized_name":"motion_scale","name":"motion_scale","type":"INT","widget":{"name":"motion_scale"},"link":null},{"localized_name":"guiding_frame_noise","name":"guiding_frame_noise","type":"FLOAT","widget":{"name":"guiding_frame_noise"},"link":null},{"localized_name":"start_frame_guidance","name":"start_frame_guidance","type":"FLOAT","widget":{"name":"start_frame_guidance"},"link":null},{"localized_name":"causal_inference","name":"causal_inference","type":"INT","widget":{"name":"causal_inference"},"link":null},{"localized_name":"clip_skip","name":"clip_skip","type":"INT","widget":{"name":"clip_skip"},"link":null},{"localized_name":"sharpness","name":"sharpness","type":"FLOAT","widget":{"name":"sharpness"},"link":null},{"localized_name":"mask_blur","name":"mask_blur","type":"FLOAT","widget":{"name":"mask_blur"},"link":null},{"localized_name":"mask_blur_outset","name":"mask_blur_outset","type":"INT","widget":{"name":"mask_blur_outset"},"link":null},{"localized_name":"preserve_original","name":"preserve_original","type":"BOOLEAN","widget":{"name":"preserve_original"},"link":null},{"localized_name":"high_res_fix","name":"high_res_fix","type":"BOOLEAN","widget":{"name":"high_res_fix"},"link":null},{"localized_name":"high_res_fix_start_width","name":"high_res_fix_start_width","type":"INT","widget":{"name":"high_res_fix_start_width"},"link":null},{"localized_name":"high_res_fix_start_height","name":"high_res_fix_start_height","type":"INT","widget":{"name":"high_res_fix_start_height"},"link":null},{"localized_name":"high_res_fix_strength","name":"high_res_fix_strength","type":"FLOAT","widget":{"name":"high_res_fix_strength"},"link":null},{"localized_name":"tiled_decoding","name":"tiled_decoding","type":"BOOLEAN","widget":{"name":"tiled_decoding"},"link":null},{"localized_name":"decoding_tile_width","name":"decoding_tile_width","type":"INT","widget":{"name":"decoding_tile_width"},"link":null},{"localized_name":"decoding_tile_height","name":"decoding_tile_height","type":"INT","widget":{"name":"decoding_tile_height"},"link":null},{"localized_name":"decoding_tile_overlap","name":"decoding_tile_overlap","type":"INT","widget":{"name":"decoding_tile_overlap"},"link":null},{"localized_name":"tiled_diffusion","name":"tiled_diffusion","type":"BOOLEAN","widget":{"name":"tiled_diffusion"},"link":null},{"localized_name":"diffusion_tile_width","name":"diffusion_tile_width","type":"INT","widget":{"name":"diffusion_tile_width"},"link":null},{"localized_name":"diffusion_tile_height","name":"diffusion_tile_height","type":"INT","widget":{"name":"diffusion_tile_height"},"link":null},{"localized_name":"diffusion_tile_overlap","name":"diffusion_tile_overlap","type":"INT","widget":{"name":"diffusion_tile_overlap"},"link":null},{"localized_name":"tea_cache","name":"tea_cache","type":"BOOLEAN","widget":{"name":"tea_cache"},"link":null},{"localized_name":"tea_cache_start","name":"tea_cache_start","type":"INT","widget":{"name":"tea_cache_start"},"link":null},{"localized_name":"tea_cache_end","name":"tea_cache_end","type":"INT","widget":{"name":"tea_cache_end"},"link":null},{"localized_name":"tea_cache_threshold","name":"tea_cache_threshold","type":"FLOAT","widget":{"name":"tea_cache_threshold"},"link":null},{"localized_name":"tea_cache_max_skip_steps","name":"tea_cache_max_skip_steps","type":"INT","widget":{"name":"tea_cache_max_skip_steps"},"link":null},{"localized_name":"separate_clip_l","name":"separate_clip_l","type":"BOOLEAN","widget":{"name":"separate_clip_l"},"link":null},{"localized_name":"clip_l_text","name":"clip_l_text","type":"STRING","widget":{"name":"clip_l_text"},"link":null},{"localized_name":"separate_open_clip_g","name":"separate_open_clip_g","type":"BOOLEAN","widget":{"name":"separate_open_clip_g"},"link":null},{"localized_name":"open_clip_g_text","name":"open_clip_g_text","type":"STRING","widget":{"name":"open_clip_g_text"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[4]}],"properties":{"cnr_id":"drawthings-grpc","ver":"40f4205bee94471af99f0eb38a992885173146fe","Node name for S&R":"DrawThingsSampler"},"widgets_values":["All","localhost","7859",true,"(None selected)",1,-1,"randomize","ScaleAlike",1024,1024,20,14,4.5,true,4.5,"Euler A",true,1,1,5,127,0.02,1,0,1,0,0,0,true,false,448,448,0.7,false,640,640,128,false,512,512,64,false,5,2,0.2,3,false,"",false,""],"nodePackVersion":"1.3.1","widget_values_keyed":{"settings":"All","server":"localhost","port":"7859","use_tls":true,"model":"(None selected)","strength":1,"seed":-1,"control_after_generate":"randomize","seed_mode":"ScaleAlike","width":1024,"height":1024,"steps":20,"num_frames":14,"cfg":4.5,"speed_up":true,"guidance_embed":4.5,"sampler_name":"Euler A","res_dpt_shift":true,"shift":1,"batch_size":1,"fps":5,"motion_scale":127,"guiding_frame_noise":0.02,"start_frame_guidance":1,"causal_inference":0,"clip_skip":1,"sharpness":0,"mask_blur":0,"mask_blur_outset":0,"preserve_original":true,"high_res_fix":false,"high_res_fix_start_width":448,"high_res_fix_start_height":448,"high_res_fix_strength":0.7,"tiled_decoding":false,"decoding_tile_width":640,"decoding_tile_height":640,"decoding_tile_overlap":128,"tiled_diffusion":false,"diffusion_tile_width":512,"diffusion_tile_height":512,"diffusion_tile_overlap":64,"tea_cache":false,"tea_cache_start":5,"tea_cache_end":2,"tea_cache_threshold":0.2,"tea_cache_max_skip_steps":3,"separate_clip_l":false,"clip_l_text":"","separate_open_clip_g":false,"open_clip_g_text":""},"_lastSelectedModel":{"model":"(None selected)"}},{"id":9,"type":"MarkdownNote","pos":[1950,1670],"size":[340,340],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["If you are using a ControlNet for inpainting, connect a Draw Things ControlNet node to select a model.\n\nProvide an image and mask to the sampler node (even if you are using a ControlNet)\n\nIf the image provided is a different size than the sampler settings, it will be resized and cropped automatically.\n\n---\n\nMake sure your Draw Things app has the following settings:\n- API Server: enabled\n- Protocol: gRPC\n- Transport Layer Security: Enabled\n- Enable Model Browser: Enabled\n- Response Compression: Disabled\n\nOr if you are using the gRPCServerCLI, use the following command:\n\n`gRPCServerCLI-macOS [path to models] --no-response-compression --model-browser`\n\nIssues or questions? Is a setting missing or not working as expected?\n- [Discord](https://discord.com/channels/1038516303666876436/1357377020299837464)\n- [Github Issues](https://github.com/Jokimbe/ComfyUI-DrawThings-gRPC/issues)\n- [Github Discusions](https://github.com/Jokimbe/ComfyUI-DrawThings-gRPC/discussions)"],"color":"#432","bgcolor":"#653"},{"id":11,"type":"LoadImage","pos":[2340,1150],"size":[400,480],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[7]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":[8]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.43","Node name for S&R":"LoadImage"},"widgets_values":["","image"]},{"id":8,"type":"DrawThingsPrompt","pos":[1890,1150],"size":[400,200],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"insert_textual_inversion","name":"insert_textual_inversion","type":"DT_MODEL","widget":{"name":"insert_textual_inversion"},"link":null},{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":null}],"outputs":[{"color_off":"#EF5350","color_on":"#EF5350","localized_name":"PROMPT","name":"PROMPT","type":"STRING","links":[5]}],"properties":{"cnr_id":"drawthings-grpc","ver":"97b273b461f7d06b8823d0e4b16cb1bcdb77054e","Node name for S&R":"DrawThingsPrompt"},"widgets_values":["...","a photograph of an cowboy riding a horse, 4k, volumetric"],"color":"#232","bgcolor":"#353","_lastSelectedModel":{}}],"links":[[4,10,0,6,0,"IMAGE"],[5,8,0,10,2,"STRING"],[6,7,0,10,3,"STRING"],[7,11,0,10,0,"IMAGE"],[8,11,1,10,1,"MASK"]],"groups":[],"config":{},"extra":{"ds":{"scale":0.6776426776161406,"offset":[-1594.4479230007187,-908.0778117737971]},"groupNodes":{"FLUX.1 Kontext Image Edit":{"nodes":[{"id":-1,"type":"Reroute","pos":[2354.87890625,-127.23468780517578],"size":[75,26],"flags":{},"order":20,"mode":0,"inputs":[{"name":"","type":"*","link":null}],"outputs":[{"name":"","type":"*","links":null}],"properties":{"showOutputText":false,"horizontal":false},"index":0},{"id":-1,"type":"ReferenceLatent","pos":[2730,-220],"size":[197.712890625,46],"flags":{},"order":22,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":null},{"localized_name":"latent","name":"latent","shape":7,"type":"LATENT","link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[]}],"properties":{"Node name for S&R":"ReferenceLatent","cnr_id":"comfy-core","ver":"0.3.38"},"index":1},{"id":-1,"type":"VAEDecode","pos":[3270,-110],"size":[210,46],"flags":{},"order":25,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":null},{"localized_name":"vae","name":"vae","type":"VAE","link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[]}],"properties":{"Node name for S&R":"VAEDecode","cnr_id":"comfy-core","ver":"0.3.38"},"index":2},{"id":-1,"type":"KSampler","pos":[2930,-110],"size":[315,262],"flags":{},"order":24,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":null},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":null},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":null},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[]}],"properties":{"Node name for S&R":"KSampler","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":[972054013131369,"fixed",20,1,"euler","simple",1],"index":3},{"id":-1,"type":"FluxGuidance","pos":[2940,-220],"size":[211.60000610351562,58],"flags":{},"order":23,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":null},{"localized_name":"guidance","name":"guidance","type":"FLOAT","widget":{"name":"guidance"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[]}],"properties":{"Node name for S&R":"FluxGuidance","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":[2.5],"index":4},{"id":-1,"type":"SaveImage","pos":[3490,-110],"size":[985.3012084960938,1060.3828125],"flags":{},"order":26,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":null},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":["ComfyUI"],"index":5},{"id":-1,"type":"CLIPTextEncode","pos":[2500,-110],"size":[422.84503173828125,164.31304931640625],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":null},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[]}],"title":"CLIP Text Encode (Positive Prompt)","properties":{"Node name for S&R":"CLIPTextEncode","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":["there is a bright light"],"color":"#232","bgcolor":"#353","index":6},{"id":-1,"type":"CLIPTextEncode","pos":[2504.1435546875,97.9598617553711],"size":[422.84503173828125,164.31304931640625],"flags":{"collapsed":true},"order":13,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":null},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[]}],"title":"CLIP Text Encode (Negative Prompt)","properties":{"Node name for S&R":"CLIPTextEncode","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":[""],"color":"#322","bgcolor":"#533","index":7},{"id":-1,"type":"UNETLoader","pos":[2630,-370],"size":[270,82],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"weight_dtype","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[]}],"properties":{"Node name for S&R":"UNETLoader","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":["flux1-kontext-dev.safetensors","default"],"color":"#223","bgcolor":"#335","index":8},{"id":-1,"type":"DualCLIPLoader","pos":[2100,-290],"size":[337.76861572265625,130],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"clip_name1","name":"clip_name1","type":"COMBO","widget":{"name":"clip_name1"},"link":null},{"localized_name":"clip_name2","name":"clip_name2","type":"COMBO","widget":{"name":"clip_name2"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[]}],"properties":{"Node name for S&R":"DualCLIPLoader","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":["clip_l.safetensors","t5xxl_fp8_e4m3fn_scaled.safetensors","flux","default"],"color":"#223","bgcolor":"#335","index":9},{"id":-1,"type":"VAELoader","pos":[2960,-370],"size":[270,58],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","links":[]}],"properties":{"Node name for S&R":"VAELoader","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":["ae.safetensors"],"color":"#223","bgcolor":"#335","index":10}],"links":[[6,0,1,0,72,"CONDITIONING"],[0,0,1,1,66,"*"],[3,0,2,0,69,"LATENT"],[10,0,2,1,76,"VAE"],[8,0,3,0,74,"MODEL"],[4,0,3,1,70,"CONDITIONING"],[7,0,3,2,73,"CONDITIONING"],[0,0,3,3,66,"*"],[1,0,4,0,67,"CONDITIONING"],[2,0,5,0,68,"IMAGE"],[9,0,6,0,75,"CLIP"],[9,0,7,0,75,"CLIP"]],"external":[],"config":{"0":{},"1":{},"2":{"output":{"0":{"visible":true}}},"3":{"output":{"0":{"visible":true}},"input":{"denoise":{"visible":false},"cfg":{"visible":false}}},"4":{},"5":{},"6":{},"7":{"input":{"text":{"visible":false}}},"8":{"input":{"weight_dtype":{"visible":false}}},"9":{"input":{"type":{"visible":false},"device":{"visible":false}}},"10":{}}}}},"version":0.4}
